!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).markedHighlight={})}(this,function(e){"use strict";function n(t){return e=>{"string"==typeof e&&e!==t.text&&(t.escaped=!0,t.text=e)}}const i=/[&<>"']/,o=new RegExp(i.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,h=new RegExp(r.source,"g"),t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f=e=>t[e];function g(e,t){if(t){if(i.test(e))return e.replace(o,f)}else if(r.test(e))return e.replace(h,f);return e}e.markedHighlight=function(i){if((i="function"==typeof i?{highlight:i}:i)&&"function"==typeof i.highlight)return"string"!=typeof i.langPrefix&&(i.langPrefix="language-"),{async:!!i.async,walkTokens(e){if("code"===e.type){var t=(e.lang||"").match(/\S*/)[0];if(i.async)return Promise.resolve(i.highlight(e.text,t)).then(n(e));t=i.highlight(e.text,t);if(t instanceof Promise)throw new Error("markedHighlight is not set to async but the highlight function is async. Set the async option to true on markedHighlight to await the async highlight function.");n(e)(t)}},renderer:{code(e,t,n){t=(t||"").match(/\S*/)[0],t=t?` class="${i.langPrefix}${g(t)}"`:"";return e=e.replace(/\n$/,""),`<pre><code${t}>${n?e:g(e,!0)}
</code></pre>`}}};throw new Error("Must provide highlight function")}});